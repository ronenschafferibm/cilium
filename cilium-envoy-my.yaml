node:
  id: host~127.0.0.1~no-id~localdomain
  cluster: ingress-cluster
static_resources:
  listeners:
  - name: 0.0.0.0:1234    
    address:
      socket_address:
        address: "0.0.0.0"
        port_value: 80
        ipv4_compat: true
    filter_chains:
    - filters:
      - name: cilium.network
        config:
          proxylib: libcilium.so
          l7_proto: mygofilter
          policy_name: 127.0.0.1
      - name: envoy.tcp_proxy
        config:
          stat_prefix: tcp_proxy
          cluster: pythonServer
    listener_filters:
    - name: cilium.bpf_metadata
      # config:
        # bpf_root: "/sys/fs/bpf"
        # is_ingress: true
  clusters:
  - name: xds-grpc-cilium
    connect_timeout: 1s
    hosts:
    - pipe:
        path: "/var/run/cilium/xds.sock"
    http2_protocol_options: {}
  - name: pythonServer
    connect_timeout: 1s
    type: static
    hosts:
      - socket_address:
          address: 127.0.0.1
          port_value: 9999
    dns_lookup_family: "v4_only"
    
admin:
  access_log_path: "/dev/null"
  address:
    socket_address:
      address: 127.0.0.1
      port_value: 8081